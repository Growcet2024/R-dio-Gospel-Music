<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controle de Peso</title>
    <link rel="stylesheet" href="styles.css">
</head>

<!-- Biblioteca Gr√°fico -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>


<!-- Biblioteca PDF --> 
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<body>

    <style>
body {
    font-family: Arial, sans-serif;
    background-color: #f4f4f4;
    margin: 0;
    padding: 0;
    display: flex;
    justify-content: center;
    align-items: flex-start; /* Em vez de center, coloca flex-start */
    min-height: 100vh; /* Usa min-height para evitar corte */
    padding-top: 20px; /* D√° um pequeno espa√ßo extra no topo */
}

/* Resetando margem e padding do body e html */
html, body {
    margin: 0;
    padding: 0;
    height: 100%; /* Garantir que o html e body ocupem toda a altura */
}

/* Conteiner principais */
.container {
    width: 100%;
    max-width: 800px; /* Limita a largura m√°xima para que o conte√∫do n√£o fique esticado demais */
    margin: 0 auto; /* Centraliza o cont√™iner */
    padding: 20px;
    box-sizing: border-box;
    text-align: center; /* Centraliza o conte√∫do */
    overflow: hidden; /* Evita que o conte√∫do ultrapasse o cont√™iner */
    background: white; /* Fundo branco */
    border-radius: 20px;
    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1); /* Adiciona sombra */
    min-height: 100vh; /* Garante que o cont√™iner preencha a altura total da tela */
}


/* Bot√µes principais registros */
input,
button {
    width: 80%; /* Garante que os inputs e bot√µes ocupem 90% da largura do cont√™iner */
    margin-bottom: 20px; /* Adiciona um pequeno espa√ßamento entre os campos */
    padding: 14px;
    border-radius: 20px;
    border: 1px solid #ccc;
    box-sizing: border-box;
}

/* Estilizando os bot√µes */
button {
    background-color: #007bff;
    color: white;
    cursor: pointer;
    border: none;
}

button:hover {
    background-color: #218838;
}


#historyList {
    list-style-type: none;
    padding: 0;
}

#imcTable {
    width: 100%;
    margin-top: 20px;
    border-collapse: collapse;
    display: none;
}

#imcTable th,
#imcTable td {
    padding: 14px;
    border: 1px solid #ddd;
    text-align: left;
}

#imcTable th {
    background-color: #007bff;
    color: white;
}

/* Resultados e outros textos */
#resultDisplay {
    font-weight: bold;
    font-size: 16px;
    margin-top: 10px;
}


      /* Bot√£o tabela IMC */
#toggleButton {
    background-color: #007bff;
    color: white;
    padding: 14px;
    border: none;
    border-radius: 20px;
    cursor: pointer;
    margin-top: 10px;
}

#toggleButton:hover {
    background-color: #218838;
}

/* Conteiner Hist√≥rico de Pesagem */
#historySection {
    margin-top: 20px;
    padding: 13px;
    background-color: #ffffff;
    border-radius: 5px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}

/* Estilo do bot√£o de Hist√≥rico de Pesagem */
.historyButton {
    padding: 13px 20px;
    font-size: 16px;
    cursor: pointer;
    background-color: #4CAF50;
    color: white;
    border: none;
    border-radius: 5px;
    margin-top: 10px;
    transition: background-color 0.3s ease;
}

.historyButton:hover {
    background-color: #45a049;
}

/* Estilo da lista de hist√≥rico */
#historyList {
    margin-top: 20px;
    padding-left: 20px;
    display: none; /* Inicialmente escondido */
    list-style-type: none;
}

#historyList li {
    background-color: #f2f2f2;
    margin: 5px 0;
    padding: 10px;
    border-radius: 5px;
}


  /* üé® CSS BARRA DE ROLAGEM - GR√ÅFICO */
#graphSection {
  margin-bottom: 20px;              /* Espa√ßo abaixo do gr√°fico */
  scrollbar-width: thin;            /* Firefox */
  scrollbar-color: #FFA500 #f0f0f0; /* Firefox */
}

/* Webkit browsers (Chrome, Edge, Safari) */
#graphSection::-webkit-scrollbar {
  height: 10px; /* Altura da barra de rolagem horizontal */
}

#graphSection::-webkit-scrollbar-track {
  background: #f0f0f0; /* Fundo da barra */
}

#graphSection::-webkit-scrollbar-thumb {
  background: #FFA500;   /* Cor laranja */
  border-radius: 10px;   /* Cantos arredondados */
}

#graphSection::-webkit-scrollbar-thumb:hover {
  background: #FF8C00; /* Laranja mais escuro no hover */
}

#graphSection {
  border: 2px solid #333; /* Laranja */
  border-radius: 5px;       /* Cantos arredondados, opcional */
  padding: 10px;             /* Espa√ßo interno para a borda n√£o colar no gr√°fico */
  margin-bottom: 20px;       /* Espa√ßo abaixo do gr√°fico */
  overflow-x: auto;          /* Manter a rolagem horizontal */
}

</style>
    

    <div class="container">
        <h2>Controle de Peso</h2>
    
        <!-- Formul√°rio de informa√ß√µes do usu√°rio -->
        <div id="userForm">
            <input type="text" id="userName" placeholder="Digite seu nome">
            <input type="text" id="height" placeholder="Digite sua altura">
            <input type="text" id="desiredWeight" placeholder="Digite seu peso desejado">
        </div>
    
        <!-- Exibe o nome e ID ap√≥s cadastro -->
        <p id="userInfo" style="font-weight: bold;"></p>
    
        <!-- Bot√µes -->
        <button id="registerButton" onclick="registerUser()">Registrar</button>
        <button id="editButton" onclick="editUser()" style="display: none;">Editar</button>
    
        <!-- Campo nome e ID -->
        <p id="userNameDisplay"></p>
    
        <p id="userInfo" style="font-weight: bold; font-size: 16px; margin-bottom: 5px;"></p>
    
        <p id="userId" style="display: none;"></p>
    
        <!-- Campos de peso e data -->
        <input type="number" id="currentWeight" placeholder="Digite o peso atual" />
    
        <!-- T√≠tulo "Data:" -->
        <label for="dateInput"></label>
    
        <!-- Campo de data -->
        <input type="datetime-local" id="dateInput">
    
        <button onclick="addWeight()">Adicionar Registro</button>
    
        <!-- Bot√£o para salvar a edi√ß√£o ap√≥s edi√ß√£o de dados -->
        <button onclick="saveEditedEntry()" style="width: 80%; padding: 14px; background-color: green; color: white; border: none; border-radius: 15px; cursor: pointer; margin-top: 10px;">
        Salvar Edi√ß√£o
        </button>
    
        <!-- Campo resultado peso saldo e IMC -->
        <p id="resultDisplay">Peso Saldo: - kg | IMC: -</p>



<!-- Bot√£o para exibir/esconder o Gr√°fico -->
<button id="toggleGraphButton" onclick="toggleGraph()">Gr√°fico Evolutivo</button>

<div id="graphSection" style="display: none;">
    <div id="graphContainer" style="background: white; padding: 10px; min-width: 400px;">
      <canvas id="weightChart" width="500"></canvas>
  
      <div style="margin-top: 10px; text-align: left; font-size: 10px; color: #333;">
        <div>Aplicativo controle de peso</div>
        <div id="nomeInfo"></div>
        <div id="dataGerada"></div>
        <div id="motivationalPhrase" style="margin-top: 4px; font-weight: bold;"></div>
      </div>

<!-- Bot√£o + Frase, tudo dentro do graphContainer -->
    <div style="margin-top: 8px; margin-bottom: 10px; text-align: left; padding-left: 12px;">
      <button onclick="downloadPDF()" style="width: 255px;">Baixar Gr√°fico</button>

        <div style="font-size: 12px; color: #555; margin-top: 4px;">
            Ap√≥s abrir o PDF, toque nos tr√™s pontinhos e escolha <br>
            compartilhar no WhatsApp, imprimir ou salvar novamente.
          </div>
      </div>
  
    </div>
  </div>
  
<!-- Bot√£o para exibir/esconder o Gerar relat√≥rio -->
<button id="toggleReportButton" onclick="toggleReport()">Gerar Relat√≥rio</button>

<div id="reportSection" style="display: none;">
  <div id="reportContent"></div> <!-- hist√≥rico -->

  <!-- Frase final com tamanho menor e fora do graphContainer -->
  <div style="font-size: 12px; color: #555; margin-top: 6px; padding: 0 10px;">
    Ap√≥s abrir o PDF, toque nos tr√™s pontinhos e escolha compartilhar no WhatsApp, imprimir ou salvar novamente.
  </div>
</div>



        <!-- Bot√£o IMC -->
<button id="toggleButton" onclick="toggleTable()">Mostrar Tabela IMC</button>

<!-- Tabela IMC -->
<table id="imcTable" style="width: 100%; margin-top: 1px; margin-bottom: 10px; border-collapse: collapse; text-align: left; display: none;">

    <thead>
        <tr style="background-color: #007bff; color: white;">
            <th style="padding: 8px; border: 1px solid #ddd;">Classifica√ß√£o</th>
            <th style="padding: 8px; border: 1px solid #ddd;">IMC</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="padding: 8px; border: 1px solid #ddd;">Abaixo do peso</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Menos de 18,5</td>
        </tr>
        <tr>
            <td style="padding: 8px; border: 1px solid #ddd;">Peso normal</td>
            <td style="padding: 8px; border: 1px solid #ddd;">18,5 - 24,9</td>
        </tr>
        <tr>
            <td style="padding: 8px; border: 1px solid #ddd;">Sobrepeso</td>
            <td style="padding: 8px; border: 1px solid #ddd;">25 - 29,9</td>
        </tr>
        <tr>
            <td style="padding: 8px; border: 1px solid #ddd;">Obesidade Grau 1</td>
            <td style="padding: 8px; border: 1px solid #ddd;">30 - 34,9</td>
        </tr>
        <tr>
            <td style="padding: 8px; border: 1px solid #ddd;">Obesidade Grau 2</td>
            <td style="padding: 8px; border: 1px solid #ddd;">35 - 39,9</td>
        </tr>
        <tr>
            <td style="padding: 8px; border: 1px solid #ddd;">Obesidade Grau 3</td>
            <td style="padding: 8px; border: 1px solid #ddd;">40 ou mais</td>
        </tr>
    </tbody>
</table>


<script>

    // ========================== BLOCO DE EXTRA√á√ÉO DOS DADOS inicio ==========================

    // == BLOCO DE EXTRA√á√ÉO DOS DADOS ==
function extractUserData() {
    let userId = localStorage.getItem("userId") || "N/A";
    let userName = localStorage.getItem("userName") || "N/A";
    let height = localStorage.getItem("height") || "N/A";
    let desiredWeight = localStorage.getItem("desiredWeight") || "N/A";
    let history = JSON.parse(localStorage.getItem("history")) || [];

    console.log("ID:", userId);
    console.log("Nome:", userName);
    console.log("Altura:", height);
    console.log("Peso Desejado:", desiredWeight);
    console.log("Hist√≥rico de Pesagem:", history);

    return { userId, userName, height, desiredWeight, history };
}

// Chamar a fun√ß√£o para testar
extractUserData();

// ========================== BLOCO DE EXTRA√á√ÉO DOS DADOS fim ==========================
</script>


<!-- RELATORIO - INICIO-->                        
<script>
<!-------------------------------- BLOCO GERAR RELATORIO ----------------->
// BLOCO 01

function toggleReport() {
    var reportSection = document.getElementById("reportSection");
    var button = document.getElementById("toggleReportButton");

    if (reportSection.style.display === "none" || reportSection.style.display === "") {
        reportSection.style.display = "block";
        button.textContent = "Fechar Relat√≥rio";

        let { userId, userName, desiredWeight, history } = extractUserData();

        // Inicia o conte√∫do com os dados do usu√°rio
        let content = `<h3>Aplicativo controle de peso</h3>`;
        content += `<p><strong>Nome:</strong> ${userName} | <strong>ID:</strong> ${userId} <br> <strong>Peso Desejado:</strong> ${desiredWeight} kg</p>`;

        // Tabela de Hist√≥rico de Pesagem
        content += `<table style="width: 100%; border-collapse: collapse; text-align: left; margin-left: 0px; margin-right: 15px;">
         <tr>
         <th style="border: 1px solid #ccc; padding: 2px; font-size: 15px;">Data:</th>
         <th style="border: 1px solid #ccc; padding: 2px; font-size: 15px;">Peso Atual</th>
         <th style="border: 1px solid #ccc; padding: 2px; font-size: 15px;">Peso Saldo</th>
         <th style="border: 1px solid #ccc; padding: 2px; font-size: 15px;">IMC</th>
         </tr>`;

    // Data dia, m√™s, ano
   history.forEach(entry => {
    // Extrair a data sem a hora do timestamp
    let dateOnly = entry.timestamp.split(",")[0]; 

    // Dividir a data em partes (dia, m√™s, ano)
    let [day, month, year] = dateOnly.split("/");

    // Pegar apenas os dois √∫ltimos d√≠gitos do ano
    let shortYear = year.slice(-2);

    // Formatar a data como dd/mm/aa
    let formattedDate = `${day}/${month}/${shortYear}`;

    // Adicionar a data formatada na tabela
    content += `<tr>
        <td style="border: 1px solid #ccc; padding: 6px; font-size: 14px;">${formattedDate}</td>
        <td style="border: 1px solid #ccc; padding: 6px; font-size: 14px;">${entry.currentWeight} kg</td>
        <td style="border: 1px solid #ccc; padding: 6px; font-size: 14px;">${entry.balanceSign} kg</td>
        <td style="border: 1px solid #ccc; padding: 6px; font-size: 14px;">${entry.imc}</td>
    </tr>`;
});

        // Adiciona data e hora do relat√≥rio gerado
        content += `<p><strong>Relat√≥rio gerado em:<br></strong> ${new Date().toLocaleString()}</p>`;
        content += `</table>`;

        // Unificando as frases: Contagem de registros e diferen√ßa de peso

        let firstWeight = parseFloat(history[0].currentWeight); // Peso inicial (primeiro registro)
        let lastWeight = parseFloat(history[history.length - 1].currentWeight); // Peso final (√∫ltimo registro)

// Calculando a diferen√ßa de peso
let weightDifference = lastWeight - firstWeight;

let weightChangeMessage = "";

// Verifica se o peso aumentou ou diminuiu
if (weightDifference > 0) {
    if (weightDifference >= 1) {
        // Se a diferen√ßa for maior ou igual a 1 kg
        weightChangeMessage = `houve uma perda de ${weightDifference.toFixed(2)} kg desde a primeira pesagem.`;
    } else {
        // Se a diferen√ßa for menor que 1 kg, exibe em gramas
        weightChangeMessage = `houve uma perda de ${(weightDifference * 1000).toFixed(0)} gramas desde a primeira pesagem.`;
    }
} else if (weightDifference < 0) {
    if (Math.abs(weightDifference) >= 1) {
        // Se a diferen√ßa for maior ou igual a 1 kg
        weightChangeMessage = `houve um ganho de ${Math.abs(weightDifference).toFixed(2)} kg desde a primeira pesagem.`;
    } else {
        // Se a diferen√ßa for menor que 1 kg, exibe em gramas
        weightChangeMessage = `houve um ganho de ${Math.abs(weightDifference * 1000).toFixed(0)} gramas desde a primeira pesagem.`;
    }
} else {
    weightChangeMessage = "Seu peso se manteve igual."; // Se n√£o houve altera√ß√£o
}

// Unificando as frases: Contagem de registros e diferen√ßa de peso

content += `<p style="text-align: center; margin-top: 10px; font-size: 12px; color: #333;">
  Aqui tem ${history.length} registros, ${weightChangeMessage}</p>`;


// FRASE MOTIVACIONAL
// Agora, usamos essa vari√°vel para comparar com o peso desejado
// Verifique se a lista `history` tem pelo menos um item


    // FRASE MOTIVACIONAL
if (history.length > 0) {
    let firstWeight = parseFloat(history[0].currentWeight); // Peso inicial (primeiro registro)

    let motivationalMessage = "";

    let weightDifference = desiredWeight - firstWeight; // Diferen√ßa do peso desejado

    // Toler√¢ncia para considerar que o objetivo foi alcan√ßado (por exemplo, 0.1 kg)
    const tolerance = 0.1;

    // Quando o peso estiver suficientemente pr√≥ximo do objetivo (considerando a toler√¢ncia)
    if (Math.abs(weightDifference) <= tolerance) {
        motivationalMessage = `<p style='text-align: center; font-size: 12px; color: green;'>Parab√©ns! Voc√™ alcan√ßou os ${desiredWeight} kg! Mantenha o foco para manter esse peso saud√°vel!</p>`;
    } 
    // Quando estiver muito perto de alcan√ßar o objetivo
    else if (weightDifference > 0 && weightDifference <= 2) {
        motivationalMessage = `<p style='text-align: center; font-size: 12px; color: blue;'>√ìtimo progresso! Voc√™ est√° prestes a atingir ${desiredWeight} kg! Faltam s√≥ ${weightDifference.toFixed(2)} kg para alcan√ßar sua meta!</p>`;
    } 
    // Quando faltam alguns quilos, mas j√° progrediu bastante
    else if (weightDifference > 2 && weightDifference <= 5) {
        motivationalMessage = `<p style='text-align: center; font-size: 12px; color: blue;'>Incr√≠vel! Voc√™ est√° a um passo de alcan√ßar seu objetivo. Faltam s√≥ ${weightDifference.toFixed(2)} kg para os ${desiredWeight} kg!</p>`;
    } 
    // Quando o peso j√° foi ultrapassado, acima do objetivo
    else if (firstWeight > desiredWeight) {
        let excessWeight = firstWeight - desiredWeight; // Peso que ultrapassou o objetivo

        // Se ultrapassou o objetivo por uma diferen√ßa pequena (at√© 1 kg)
        if (excessWeight > 0 && excessWeight <= 1) {
            motivationalMessage = `<p style='text-align: center; font-size: 12px; color: orange;'>Voc√™ ultrapassou seu objetivo por apenas ${excessWeight.toFixed(2)} kg! Ajuste um pouco mais para alcan√ßar o equil√≠brio!</p>`;
        }
        // Se ultrapassou o objetivo por uma diferen√ßa m√©dia (entre 1 kg e 2 kg)
        else if (excessWeight > 1 && excessWeight <= 2) {
            motivationalMessage = `<p style='text-align: center; font-size: 12px; color: orange;'>Voc√™ superou seu objetivo em ${excessWeight.toFixed(2)} kg! Mantenha o foco para alcan√ßar um n√≠vel saud√°vel.</p>`;
        }
        // Se ultrapassou o objetivo por uma diferen√ßa consider√°vel (entre 2 kg e 5 kg)
        else if (excessWeight > 2 && excessWeight <= 5) {
            motivationalMessage = `<p style='text-align: center; font-size: 12px; color: orange;'>Voc√™ ultrapassou seu objetivo em ${excessWeight.toFixed(2)} kg! √â importante focar em manter ou ajustar seu peso agora.</p>`;
        }
        // Se ultrapassou o objetivo por uma diferen√ßa significativa (acima de 5 kg)
        else {
            motivationalMessage = `<p style='text-align: center; font-size: 12px; color: red;'>Alerta! Voc√™ ultrapassou ${excessWeight.toFixed(2)} kg. do seu objetivo. Ajuste seu peso para um equil√≠brio saud√°vel.</p>`;
        }
    }
    // Quando ainda est√° abaixo do peso desejado
    else if (firstWeight < desiredWeight) {
        let missingWeight = desiredWeight - firstWeight; // Peso que falta para o objetivo

        motivationalMessage = `<p style='text-align: center; font-size: 12px; color: red;'>Faltam ${missingWeight.toFixed(2)} kg para voc√™ atingir ${desiredWeight} kg. Alimente-se bem para alcan√ßar sua meta com sa√∫de!</p>`;
    }

    // Exibe a frase motivacional
    content += motivationalMessage;
} else {
    console.error("A lista de hist√≥rico est√° vazia. N√£o √© poss√≠vel calcular o peso inicial.");
}

        // Bot√µes para PDF, WhatsApp e enviar para n√∫mero
        content += `</ul></div>`;
        content += `<div style="text-align: center; margin-top: 10px;">`;
        content += `<button onclick="generatePDF()" style="margin-right: 10px;">Baixar Relat√≥rio</button>`;
        
        content += `</div>`;

        // Exibe o conte√∫do gerado no HTML
        document.getElementById("reportContent").innerHTML = content;

    } else {
        reportSection.style.display = "none";
        button.textContent = "Gerar Relat√≥rio";
    }
}

function loadReportData() {
    var reportContent = document.getElementById("reportContent");
    reportContent.innerHTML = ""; // Limpa antes de adicionar novos dados

    // Exemplo de dados carregados (substitua pela l√≥gica real)
    var userData = {
        name: "Usu√°rio Exemplo",
        id: "12345",
        pesoDesejado: "70kg",
        historico: [
            { data: "18/03/2025", peso: "65kg", saldo: "+5kg", imc: "22.5" },
            { data: "17/03/2025", peso: "64kg", saldo: "+4kg", imc: "22.0" }
        ]
    };

    // Monta o cabe√ßalho

    var header = `<p><strong>Nome:</strong> ${userData.name} | <strong>ID:</strong> ${userData.id}</p>
                   <p><strong>Peso Desejado:</strong> ${userData.pesoDesejado}</p>`;
    reportContent.innerHTML += header;

    // Monta a tabela de hist√≥rico
    var table = `<table border='1' style='width:100%; text-align:left;'>
                    <tr><th>Data</th><th>Peso Atual</th><th>Saldo</th><th>IMC</th></tr>`;
    userData.historico.forEach(item => {
        table += `<tr><td>${item.data}</td><td>${item.peso}</td><td>${item.saldo}</td><td>${item.imc}</td></tr>`;
    });
    table += "</table>";
    reportContent.innerHTML += table;
}

// CSS = Adicionando borda e organiza√ß√£o visual ao relat√≥rio
document.addEventListener("DOMContentLoaded", function() {
    var reportSection = document.getElementById("reportSection");
    reportSection.style.border = "2px solid gray";
    reportSection.style.padding = "10px";
    reportSection.style.marginTop = "1px";
    reportSection.style.marginBottom = "10px";
    reportSection.style.borderRadius = "5px";
    reportSection.style.width = "94%";
    reportSection.style.backgroundColor = "#ffffff";
});

</script>


<script>
// BLOCO 02 = Captura de Dados
function getUserReportData() {
    // Captura os dados b√°sicos do usu√°rio
    let userId = localStorage.getItem("userId") || "N/A";
    let userName = localStorage.getItem("userName") || "N/A";
    let desiredWeight = localStorage.getItem("desiredWeight") || "N/A";
    
    // Captura o hist√≥rico de pesagem
    let history = JSON.parse(localStorage.getItem("history")) || [];
    
    // Garante que o hist√≥rico tenha a estrutura correta
    if (!Array.isArray(history)) {
        history = [];
        console.warn("O hist√≥rico de pesagem est√° com formato inv√°lido.");
    }
    
    return { userId, userName, desiredWeight, history };
}
</script>

<script>
// BLOCO 03 - ORGANIZAR DADOS DO HIST√ìRICO
function getFormattedHistory() {
    let history = JSON.parse(localStorage.getItem("history")) || [];

    // Formatar os dados do hist√≥rico
    let formattedHistory = history.map(entry => {
        return `Data: ${entry.timestamp.split(',')[0]} | Peso Atual: ${entry.currentWeight} kg | IMC: ${entry.imc}`;
    }).join("\n");

    return formattedHistory;
}
</script>

<script>
// BLOCO 04 - GERAR RELAT√ìRIO COMPLETO
function generateReportText() {
    let userInfo = getUserInfo(); // Obt√©m as informa√ß√µes b√°sicas
    let historyData = getFormattedHistory(); // Obt√©m os dados formatados do hist√≥rico

    let reportText = `${userInfo}\n\nHist√≥rico de Pesagem:\n${historyData}`;
    return reportText;
}
</script>

<script>
// BLOCO 05 - EXIBIR RELAT√ìRIO NA TELA
function displayReport() {
    let reportContent = generateReportText(); // Obt√©m o texto do relat√≥rio
    let reportContainer = document.getElementById("reportDisplay"); // Elemento onde ser√° exibido

    reportContainer.textContent = reportContent; // Exibe o relat√≥rio na tela
    reportContainer.style.whiteSpace = "pre-line"; // Mant√©m a formata√ß√£o de quebras de linha
}
</script>


<!--// BLOCO 06 - Fun√ß√£o baixar PDF -->
<script>
function generatePDF() {
    // Oculta os bot√µes temporariamente
    const buttons = document.querySelectorAll("#reportSection button");
    buttons.forEach(button => button.style.display = "none");

    const { jsPDF } = window.jspdf;  // Acesso correto para jsPDF vers√£o 2.x
    const doc = new jsPDF("p", "mm", "a4");
    doc.setFontSize(10); // Reduz o tamanho da fonte para caber melhor
    doc.rect(15, 15, 180, 267);  // Ajuste de margens (topo e esquerda com 10mm)

    doc.setFont("helvetica", "bold"); // Define fonte em negrito
    doc.text("Relat√≥rio de Pesagem", 20, 22);
    doc.setFont("helvetica", "normal"); // Retorna a fonte ao normal para o restante do conte√∫do

    let content = document.getElementById("reportContent").innerText; // Captura o texto vis√≠vel

    doc.text(content, 20, 27); // Adiciona o conte√∫do ao PDF
    doc.save("Relatorio_Pesagem.pdf"); // Baixa o arquivo  

    // Restaura a exibi√ß√£o dos bot√µes
    buttons.forEach(button => button.style.display = "inline-block");
}
 </script>
    


<!-- GRAFICO EVOLUTIVO -->

<script>
<!-------------------------------- BLOCO GRAFICO EVOLUTIVO----------------->
    <!-- BLOCO 01 -->
    function toggleGraph() {
            var graphSection = document.getElementById("graphSection");
            var button = document.getElementById("toggleGraphButton");
    
            if (graphSection.style.display === "none" || graphSection.style.display === "") {
                graphSection.style.display = "block";
                button.textContent = "Fechar Gr√°fico";
            } else {
                graphSection.style.display = "none";
                button.textContent = "Gr√°fico Evolutivo";
            }
        }
    

    <!-- BLOCO 2 = Capturar os dados do localStorage-->
   
    // Fun√ß√£o para capturar os dados do localStorage e formatar corretamente

    function getWeightData() {
    let userData = extractUserData();
    let records = userData.history || [];

   

    // Extrai as datas (sem a hora), pesos e IMCs
    let labels = records.map(record => record.timestamp.split(',')[0]);
    let weights = records.map(record => parseFloat(record.currentWeight));
    let imcValues = records.map(record => parseFloat(record.imc));

    return { labels, weights, imcValues };
}



<!-- BLOCO 3 -->

 // Fun√ß√£o para atualizar o gr√°fico com os dados reais
function updateChart() {
    let { labels, weights, imcValues } = getWeightData();

    // Verifica se o gr√°fico j√° existe e destr√≥i para recriar
    if (window.myChart) {
        window.myChart.destroy();
    }

    // Calcula as m√©dias
    const mediaPeso = (weights.reduce((a, b) => a + b, 0) / weights.length).toFixed(2);
    const mediaIMC = (imcValues.reduce((a, b) => a + b, 0) / imcValues.length).toFixed(2);





    const ctx = document.getElementById("weightChart").getContext("2d");
    window.myChart = new Chart(ctx, {
        type: "line",
        data: {
            labels: labels,
            datasets: [
                
                {
                    label: `Peso (m√©dia): ${mediaPeso}`,
    data: weights,
    borderColor: "blue",
    borderWidth: 2,
    fill: false,
    pointBackgroundColor: "blue",
    // Altera√ß√µes adicionadas aqui:
    pointRadius: 2, // Aumenta o tamanho das bolinhas
    pointHoverRadius: 2, // Aumenta o tamanho das bolinhas quando em hover
    pointBorderWidth: 2, // Aumenta a borda da bolinha

                },
                {

                    label: `IMC (m√©dia): ${mediaIMC}`,
    data: imcValues,
    borderColor: "green",
    borderWidth: 2,
    fill: false,
    pointBackgroundColor: "green",
    // Altera√ß√µes adicionadas aqui:
    pointRadius: 2, // Aumenta o tamanho das bolinhas
    pointHoverRadius: 2, // Aumenta o tamanho das bolinhas quando em hover
    pointBorderWidth: 2, // Aumenta a borda da bolinha- Verde

                }
            ]
        },

       
        options: {
            responsive: true,
            plugins: {
                datalabels: {
                    color: '#000',
                    anchor: 'end',
                    top: 45,  // ‚¨ÖÔ∏è Aqui voc√™ pode aumentar pra 20
                    formatter: value => value.toFixed(2)
                },
                legend: {
                    labels: {
                        usePointStyle: true,
                        pointStyle: 'circle'
                    }
                }
            },
            // Adicionando espa√ßo nas margens internas
            layout: {
                padding: {
                    left: 1,   // Ajuste o espa√ßo √† esquerda
                    right: 1,  // Ajuste o espa√ßo √† direita
                    top: 1,    // Ajuste o espa√ßo acima
                    bottom: 1,  // Ajuste o espa√ßo abaixo
                }
            },
            scales: {
                y: {
                    beginAtZero: false
                }
            }
        },
        plugins: [ChartDataLabels]
    });
}


function atualizarDataGerada() {
  const agora = new Date();
  const dataFormatada = agora.toLocaleString('pt-BR'); // ex: 09/04/2025, 15:03:22
  const elementoData = document.getElementById("dataGerada");
  if (elementoData) {
    elementoData.textContent = `Gr√°fico gerado em: ${dataFormatada}`;
  }
}

function preencherNomeInfo() {
    const userName = localStorage.getItem("userName") || "Usu√°rio";
    const userId = localStorage.getItem("userId") || "ID-desconhecido";
    const desiredWeight = localStorage.getItem("desiredWeight") || "--";

    const nomeInfoText = `Nome: ${userName} | ID: ${userId} | Peso Desejado: ${desiredWeight} kg`;
    document.getElementById("nomeInfo").innerText = nomeInfoText;
}

updateChart();  // gr√°fico √© desenhado
preencherNomeInfo();  // exibe as infos corretamente



updateChart();
atualizarFraseMotivacional();
atualizarDataGerada(); // ‚Üê ESSA LINHA ATUALIZA A DATA/HORA



// BLOCO 4 - Atualiza informa√ß√µes abaixo do gr√°fico

<!-- BLOCO 4 - Frase motivacional -->
function atualizarFraseMotivacional() {
  let { imcValues } = getWeightData();
  if (imcValues.length === 0) return;

  const primeiroIMC = imcValues[0]; // Pegando o primeiro valor
  let frase = "";

  if (primeiroIMC < 18.5) {
    frase = "Seu IMC indica que voc√™ est√° abaixo do peso. Mantenha-se atento √† sua sa√∫de! ";
  } else if (primeiroIMC >= 18.5 && primeiroIMC < 25) {
    frase = "Parab√©ns! Seu IMC est√° dentro do peso ideal. Continue assim!";
  } else if (primeiroIMC >= 25 && primeiroIMC < 30) {
    frase = "Seu IMC est√° acima do ideal. Com pequenas mudan√ßas, √© poss√≠vel alcan√ßar uma sa√∫de melhor!";
  } else {
    frase = "Seu IMC sugere obesidade. Cuidar da sua sa√∫de √© um passo valioso rumo ao bem-estar.";
  }

  document.getElementById("motivationalPhrase").textContent = frase;
}

<!-- BLOCO 5 --> ‚Äì Fun√ß√£o para Baixar PDF

  async function downloadPDF() {
    const { jsPDF } = window.jspdf;
    const canvas = document.getElementById("weightChart");

    // Gera a imagem do gr√°fico
    const chartImage = canvas.toDataURL("image/png", 1.0);

    const doc = new jsPDF({
      orientation: 'landscape',
      unit: 'pt',
      format: 'a4'
    });

    const pageWidth = doc.internal.pageSize.getWidth();
    const pageHeight = doc.internal.pageSize.getHeight();

    const imgWidth = pageWidth - 80;  // Margem horizontal
    const imgHeight = (canvas.height / canvas.width) * imgWidth;

    // T√≠tulo
    doc.setFontSize(14);
    doc.text("Gr√°fico de Peso e IMC", 40, 40);

    // Dados de identifica√ß√£o (puxados corretamente)
    const userName = localStorage.getItem('userName') || "Usu√°rio";
    const userId = localStorage.getItem('userId') || "Sem ID";
    const pesoDesejado = localStorage.getItem("desiredWeight") || "N√£o definido";
    const dataGerada = document.getElementById("dataGerada").innerText;
    const fraseMotivacional = document.getElementById("motivationalPhrase").innerText;

    doc.setFontSize(10);
    doc.text(`Nome: ${userName} | ID: ${userId} | Peso Desejado: ${pesoDesejado} kg`, 40, 60);
    doc.text(dataGerada, 40, 75);
    doc.setFont(undefined, "bold");
    doc.text(fraseMotivacional, 40, 90);
    doc.setFont(undefined, "normal");

    // Adiciona imagem do gr√°fico
    doc.addImage(chartImage, "PNG", 40, 110, imgWidth, imgHeight);

    // Salvar
    doc.save("grafico_peso_imc.pdf");

  }
</script>




 <!-- Bloco bot√£o historicode pesagem  inicio-->
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>P√°gina de Hist√≥rico de Pesagem</title>
    <style>
        /* Estilo para a se√ß√£o do hist√≥rico inicialmente escondido */
        #historySection {
            display: none;
        }
    </style>
</head>
<body>
    <!-- Cont√™iner Principal -->
    <div id="mainContainer">
        <!-- Outros elementos do cont√™iner principal -->

        <!-- Bot√£o para alternar a visibilidade do hist√≥rico -->
        <button id="toggleHistoryButton">Hist√≥rico de Pesagem</button>

        <!-- Se√ß√£o do hist√≥rico -->
        <div id="historySection">
            <ul id="historyList">
                <!-- Os registros de pesagem ser√£o inseridos aqui -->
                <li>Registro 1</li>
                <li>Registro 2</li>
                <li>Registro 3</li>
            </ul>
        </div>

        <!-- Outros elementos do cont√™iner principal -->
    </div>


    <!-- Script JavaScript -->
<script>
    document.addEventListener("DOMContentLoaded", function() {
        var historySection = document.getElementById("historySection");
        var toggleButton = document.getElementById("toggleHistoryButton");

        // Definindo o estado inicial do hist√≥rico como oculto
        historySection.style.display = "none";
        toggleButton.textContent = "Hist√≥rico de Pesagem";  // Texto inicial do bot√£o

        // Evento de clique no bot√£o
        toggleButton.addEventListener("click", function() {
            // Verifica se o hist√≥rico est√° vis√≠vel ou n√£o
            if (historySection.style.display === "none") {
                historySection.style.display = "block";  // Exibe o hist√≥rico
                this.textContent = "Ocultar Hist√≥rico de Pesagem";  // Altera o texto do bot√£o
            } else {
                historySection.style.display = "none";  // Oculta o hist√≥rico
                this.textContent = "Hist√≥rico de Pesagem";  // Restaura o texto do bot√£o
            }
        });
    });
</script>
<!-- Bloco bot√£o historicode pesagem  fim-->

 </div>
    <!-- Campo oculto para armazenar o √≠ndice do hist√≥rico -->
 <input type="hidden" id="historyIndex">
 </div>

                </tr>
            </tbody>
        </table>

    
        <script>

        function toggleTable() {
        var table = document.getElementById("imcTable");
        // Verifica se a tabela est√° vis√≠vel ou n√£o
        if (table.style.display === "none" || table.style.display === "") {
            table.style.display = "table";  // Torna a tabela vis√≠vel
        } else {
            table.style.display = "none";  // Oculta a tabela
        }
    }
    
        </script>
            
    <script>

function toggleTable() {
    var table = document.getElementById("imcTable");
    var button = document.getElementById("toggleButton");
    
    // Verifica se a tabela est√° vis√≠vel
    if (table.style.display === "none" || table.style.display === "") {
        table.style.display = "table"; // Torna a tabela vis√≠vel
        button.textContent = "Fechar Tabela IMC"; // Altera o texto do bot√£o
    } else {
        table.style.display = "none"; // Torna a tabela invis√≠vel
        button.textContent = "Mostrar Tabela IMC"; // Restaura o texto original do bot√£o
    }
}

        function formatNumber(value) {
            return value.replace(',', '.'); // Garante que n√∫meros sejam armazenados corretamente
        }
    
        function generateUserId() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
            let userId = '';
            for (let i = 0; i < 8; i++) {
                userId += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return userId;
        }
    
        let userId = localStorage.getItem('userId') || null;
        let userName = localStorage.getItem('userName') || "";
        let height = localStorage.getItem('height') || "";
        let desiredWeight = localStorage.getItem('desiredWeight') || "";
        let history = JSON.parse(localStorage.getItem('history')) || [];
    
        document.getElementById('userName').value = userName;
        document.getElementById('height').value = height ? parseFloat(height) : "";
        document.getElementById('desiredWeight').value = desiredWeight ? parseFloat(desiredWeight) : "";
    
        
        function registerUser() {
    let userName = document.getElementById('userName').value.trim();
    let height = document.getElementById('height').value.trim();
    let desiredWeight = document.getElementById('desiredWeight').value.trim();

    if (!userName || !height || !desiredWeight) {
        alert("Por favor, preencha todos os campos corretamente.");
        return;
    }

    let userId = localStorage.getItem('userId');
    if (!userId) {
        userId = generateUserId();
        localStorage.setItem('userId', userId);
    }

    localStorage.setItem('userName', userName);
    localStorage.setItem('height', height);
    localStorage.setItem('desiredWeight', desiredWeight);

    // Atualiza exibi√ß√£o do nome e ID sem mudar o ID
    document.getElementById('userInfo').innerText = `Usu√°rio: ${userName} | ID: ${userId}`;

    // Esconde os campos ap√≥s o cadastro
    document.getElementById('userForm').style.display = 'none';

    // Ajusta os bot√µes
    document.getElementById('registerButton').style.display = 'none';
    document.getElementById('editButton').style.display = 'inline';
}

function editUser() {
    // Mostra os campos para edi√ß√£o
    document.getElementById('userForm').style.display = 'block';

    // Ajusta os bot√µes
    document.getElementById('registerButton').style.display = 'inline';
    document.getElementById('editButton').style.display = 'none';
}

// Mant√©m os dados na tela ao recarregar a p√°gina
window.onload = function() {
    // Garantir que a fonte do bot√£o tenha o tamanho correto logo que a p√°gina carregar
    toggleHistoryButton.style.fontSize = "14px"; // Ajuste conforme necess√°rio

    let userId = localStorage.getItem('userId');
    let userName = localStorage.getItem('userName');

    if (userId && userName) {
        document.getElementById('userInfo').innerText = `Usu√°rio: ${userName} | ID: ${userId}`;
        document.getElementById('userForm').style.display = 'none';
        document.getElementById('registerButton').style.display = 'none';
        document.getElementById('editButton').style.display = 'inline';
    }
};

        function saveUser() {
            userName = document.getElementById('userName').value.trim();
            height = document.getElementById('height').value.trim();
            desiredWeight = document.getElementById('desiredWeight').value.trim();
    
            if (!userName || !height || !desiredWeight) {
                alert("Por favor, preencha todos os campos corretamente.");
                return;
            }
    
            localStorage.setItem('userName', userName);
            localStorage.setItem('height', height);
            localStorage.setItem('desiredWeight', desiredWeight);
    
            document.getElementById('userName').disabled = true;
            document.getElementById('height').disabled = true;
            document.getElementById('desiredWeight').disabled = true;
            document.getElementById('saveButton').style.display = 'none';
            document.getElementById('editButton').style.display = 'inline';

            document.getElementById("userName").innerText = "Usu√°rio: Jo√£o"; // Troque "Jo√£o" pelo nome salvo

        }

   
// Garante que n√∫meros sejam armazenados corretamente, fim do bloco //


document.addEventListener("DOMContentLoaded", function() {
    // O campo "Peso atual" ficar√° vis√≠vel desde o in√≠cio
    document.getElementById('currentWeight').style.display = 'inline';  // Exibe o campo de peso atual
    
    // Inicialmente, escondemos o t√≠tulo "Data:", o campo "Data" e o bot√£o "Salvar Edi√ß√£o"
    document.querySelector('label[for="dateInput"]').style.display = 'none';  // Esconde o t√≠tulo "Data:"
    document.getElementById('dateInput').style.display = 'none';  // Esconde o campo de data
    document.querySelector('button[onclick="saveEditedEntry()"]').style.display = 'none';  // Esconde o bot√£o "Salvar Edi√ß√£o"
    
    // Garante que o bot√£o "Adicionar Registro" esteja vis√≠vel
    document.querySelector('button[onclick="addWeight()"]').style.display = 'inline';

    let historySection = document.getElementById('historySection');
    let historyList = document.getElementById('historyList');
    let toggleHistoryButton = document.getElementById('toggleHistoryButton');

    if (!historySection || !historyList) {
        console.error("Erro: Elementos de hist√≥rico n√£o encontrados.");
        return;
    }

    // Verifica se o bot√£o de altern√¢ncia j√° existe. Se n√£o, cria-o.
    if (!toggleHistoryButton) {
        toggleHistoryButton = document.createElement('button');
        toggleHistoryButton.innerText = "Hist√≥rico de Pesagem";
        toggleHistoryButton.id = "toggleHistoryButton";
        toggleHistoryButton.style.display = "block";
        toggleHistoryButton.style.margin = "10px 0";
        toggleHistoryButton.style.padding = "10px";
        toggleHistoryButton.style.width = "100%";
        toggleHistoryButton.style.background = "#007bff";
        toggleHistoryButton.style.color = "white";
        toggleHistoryButton.style.border = "none";
        toggleHistoryButton.style.borderRadius = "5px";
        toggleHistoryButton.style.cursor = "pointer";
        toggleHistoryButton.style.fontSize = "16px";
        toggleHistoryButton.style.fontWeight = "bold";

        toggleHistoryButton.onclick = function() {
            // Alterna entre exibir e ocultar o hist√≥rico
            if (historyList.style.display === "none" || historyList.style.display === "") {
                historyList.style.display = "block";
                toggleHistoryButton.innerText = "Ocultar Hist√≥rico";
            } else {
                historyList.style.display = "none";
                toggleHistoryButton.innerText = "Hist√≥rico de Pesagem";
            }
        };

        // Inserir o bot√£o antes da lista de hist√≥rico
        historySection.insertBefore(toggleHistoryButton, historyList);
    }

    // Carregar o hist√≥rico do localStorage = CHAVE STORAGE
    let history = JSON.parse(localStorage.getItem('history')) || [];

    // Se j√° houver hist√≥rico, exibe a lista (Mudei o nome Ocultar Hist√≥rico)
    if (history.length > 0) {
        historyList.style.display = "block"; // Exibe o hist√≥rico automaticamente
        toggleHistoryButton.innerText = "Hist√≥rico de pesagem"; // Atualiza o texto do bot√£o
    } else {
        historyList.style.display = "none"; // Mant√©m oculto se n√£o houver hist√≥rico
    }


    // Atualiza a lista de hist√≥rico na tela
    updateHistory();
});

// Fun√ß√£o de editar os dados
function editEntry(index) {
    let entry = history[index];

    // Carregar as informa√ß√µes do hist√≥rico nos campos de entrada
    document.getElementById('currentWeight').value = entry.currentWeight;  // Preenche o peso atual
    document.getElementById('historyIndex').value = index;  // Guarda o √≠ndice do item para atualizar depois
    document.getElementById('dateInput').value = entry.timestamp;  // Preenche o campo de data
    document.getElementById('currentWeight').focus();  // D√° foco no campo de peso atual

    // Exibe os campos de edi√ß√£o e o bot√£o "Salvar Edi√ß√£o"
    document.querySelector('label[for="dateInput"]').style.display = 'inline'; // Exibe a palavra "Data:"
    document.getElementById('dateInput').style.display = 'inline'; // Exibe o campo de data
    document.querySelector('button[onclick="saveEditedEntry()"]').style.display = 'inline'; // Exibe o bot√£o "Salvar Edi√ß√£o"
    document.querySelector('button[onclick="addWeight()"]').style.display = 'none'; // Esconde o bot√£o "Adicionar Registro"
}

// Fun√ß√£o de salvar a edi√ß√£o
function saveEditedEntry() {
    let index = document.getElementById('historyIndex').value;  // Pega o √≠ndice do hist√≥rico que foi editado
    let newWeight = document.getElementById('currentWeight').value.trim();  // Novo peso atual
    let newDate = document.getElementById('dateInput').value;  // Nova data

    if (!newWeight || !newDate) {
        alert("Por favor, insira todos os dados.");
        return;
    }

    // Atualizar os dados no hist√≥rico
    history[index].currentWeight = newWeight;

    history[index].timestamp = new Date(newDate).toLocaleDateString('pt-BR');  // Apenas a data

    // Atualizar o saldo e IMC
    history[index].balanceSign = (parseFloat(newWeight) - parseFloat(desiredWeight)).toFixed(2);
    history[index].imc = (parseFloat(newWeight) / (parseFloat(height) * parseFloat(height))).toFixed(2);

    // Salvar no localStorage
    localStorage.setItem('history', JSON.stringify(history));

    // Atualiza o hist√≥rico na tela
    updateHistory();

    // Limpa os campos de edi√ß√£o
    document.getElementById('currentWeight').value = '';
    document.getElementById('dateInput').value = '';
    document.getElementById('historyIndex').value = '';

    // Esconde os campos de edi√ß√£o ap√≥s salvar
    document.querySelector('label[for="dateInput"]').style.display = 'none';  // Esconde o t√≠tulo "Data:"
    document.getElementById('dateInput').style.display = 'none';  // Esconde o campo de data
    document.querySelector('button[onclick="saveEditedEntry()"]').style.display = 'none';  // Esconde o bot√£o "Salvar Edi√ß√£o"
    
    // Mostra o bot√£o "Adicionar Registro"
    document.querySelector('button[onclick="addWeight()"]').style.display = 'inline'; // Garante que o bot√£o de adicionar registro volte a ser vis√≠vel
}


function addWeight() {
    let currentWeight = formatNumber(document.getElementById('currentWeight').value.trim());

    if (!currentWeight) {
        alert("Por favor, insira seu peso atual.");
        return;
    }

    let weightBalance = (parseFloat(currentWeight) - parseFloat(desiredWeight)).toFixed(2);
    let balanceSign = weightBalance > 0 ? `+${weightBalance}` : weightBalance;
    let imc = (parseFloat(currentWeight) / (parseFloat(height) * parseFloat(height))).toFixed(2);



    // **üìå Atualiza os valores na tela principal**
    document.getElementById('resultDisplay').innerText = `Peso Saldo: ${balanceSign} kg | IMC: ${imc}`;

    let timestamp = new Date().toLocaleDateString('pt-BR');

    let entry = {
        timestamp: timestamp,
        currentWeight: currentWeight,
        balanceSign: balanceSign,
        imc: imc
    };

    history.unshift(entry);
    localStorage.setItem('history', JSON.stringify(history));

    updateHistory(); // Atualiza a lista no hist√≥rico




    // **üìå Limpa o campo de peso ap√≥s adicionar**
    document.getElementById('currentWeight').value = "";
}

 // 3¬∫ bloco
 function updateHistory() {
    let historyList = document.getElementById('historyList');
    historyList.innerHTML = ""; // Limpa o conte√∫do da lista
    history.forEach((entry, index) => {

        let listItem = document.createElement('div');

        listItem.style.borderBottom = "1px solid #ccc";
        listItem.style.padding = "15px";
        listItem.style.marginBottom = "10px";
        listItem.style.backgroundColor = "#f9f9f9"; // Fundo levemente cinza para diferenciar os itens

        listItem.style.marginLeft = "0px";  // Centraliza √† esquerda
        listItem.style.marginRight = "18px"; // Centraliza √† direita

        listItem.innerHTML = `
            <div style="font-size: 16px; font-weight: bold; color: #333;">
                ${entry.timestamp}
            </div>
            <div style="display: flex; justify-content: space-between; margin-top: 10px;">
                <div>
                    <strong>Peso Atual:</strong><br>
                    <span>${entry.currentWeight} kg</span>
                </div>
                <div>
                    <strong>Peso Saldo:</strong><br>
                    <span>${entry.balanceSign} kg</span> <!-- Aqui mostramos o Peso Saldo -->
                </div>
                <div>
                    <strong>IMC:</strong><br>
                    <span>${entry.imc}</span> <!-- Aqui mostramos o IMC -->
                </div>
            </div>
            
<div style="margin-top: 8px; display: flex; gap: 10px;">
    <button onclick="editEntry(${index})" style="flex: 1; padding: 10px; background-color: orange; color: white; border: none; border-radius: 15px; cursor: pointer;">
        Editar
    </button>
    <button onclick="confirmDelete(${index})" style="flex: 1; padding: 10px; background-color: red; color: white; border: none; border-radius: 15px; cursor: pointer;">
        Apagar
    </button>
</div>

        `;

        historyList.appendChild(listItem);
    });

    historyList.style.display = "block"; // Garante que o hist√≥rico esteja vis√≠vel
}


function confirmDelete(index) {
    let confirmation = confirm("Tem certeza que deseja apagar este registro?");
    if (confirmation) {
        deleteEntry(index);
    }
}

function deleteEntry(index) {
    history.splice(index, 1);
    localStorage.setItem('history', JSON.stringify(history));
    updateHistory();
}

    </script>




<script>
    <-- // 3Ô∏è‚É£ CRIA√á√ÉO DO GR√ÅFICO (configura√ß√£o do Chart.js) -->
    
  // CRIA√á√ÉO DO GR√ÅFICO
let ctx = document.getElementById("weightChart").getContext("2d");
let weightChart;

function createChart(data) {
    if (weightChart) {
        weightChart.destroy(); // Garante que n√£o existam m√∫ltiplos gr√°ficos
    }

    let dates = data.map(entry => entry.date);
    let weights = data.map(entry => entry.weight);
    let imcValues = data.map(entry => entry.imc);

    weightChart = new Chart(ctx, {
        type: "line",
        data: {
            labels: dates,
            datasets: [
                {
                    label: "Peso (kg)",
                    data: weights,
                    borderColor: "blue",
                    backgroundColor: "rgba(0, 0, 255, 0.2)",
                    borderWidth: 2
                },
                {
                    label: "IMC",
                    data: imcValues,
                    borderColor: "green",
                    backgroundColor: "rgba(0, 255, 0, 0.2)",
                    borderWidth: 2
                }
            ]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                x: {
                    title: {
                        display: true,
                        text: "Data"
                    }
                },
                y: {
                    title: {
                        display: true,
                        text: "Valores"
                    }
                }
            }
        }
    });
}

document.addEventListener("DOMContentLoaded", function() {
    console.log("Script carregado! Criando gr√°fico...");
    createChart([]); // Apenas um teste inicial, depois passamos os dados reais.
});

</script>



<script>
    function createChart(data) {
        console.log("Criando gr√°fico com dados:", data);
    }
</script>

  </body>
  </html>
  

